{% if site.comment.provider == "gitalk" %}

    <!----------------- Gitalk ----------------->
    <style>
        .hiddenComments{
            display:none;
        }
    </style>


    <div class="comment hiddenComments" id="comments-container">
        <div id="gitalk-container"></div>
    </div>

    {%- assign _admin_list = "" -%}
    {%- for _admin in site.comment.gitalk.admin -%}
    {%- assign _admin_list = _admin_list | append: ", '" | append: _admin | append: "'" -%}
    {%- endfor -%}
    {%- assign _last = _admin_list | size | minus: 1 -%}
    {%- assign _admin_list = _admin_list | slice: 2, _last -%}

    <script defer type="text/javascript">

      var gitalk = new Gitalk({
        clientID: "{{ site.comment.gitalk.clientID }}",
        clientSecret: "{{ site.comment.gitalk.clientSecret }}",
        repo: "{{ site.comment.gitalk.repo }}",
        owner: "{{ site.comment.gitalk.owner }}",
        admin: [{{ _admin_list }}],
        id: location.pathname,
        distractionFreeMode: false
      });

      // onload = gitalkRender();

      $(document).ready(function(){
          gitalk.render("gitalk-container");

          document.querySelector("#comments-container").classList.remove("hiddenComments");
      })

    </script>

{% endif %}
